<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:cc="http://xmlns.jcp.org/jsf/composite"
	xmlns:ic="http://ivyteam.ch/jsf/component"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<cc:interface componentType="IvyComponent">
	<cc:attribute name="dialogWidgetVarId" required="true" />
</cc:interface>


<cc:implementation>
	<p:dialog widgetVar="#{cc.attrs.dialogWidgetVarId}" width="95%"
		header="Workflow Estimator Demo" appendTo="@(body)">
		<h:form id="estimator-dialog-content">
			<p:panelGrid columns="4" layout="flex"
				columnClasses="col-12 md:col-2 xl:col-3, col-12 md:col-4 xl:col-9, col-12 md:col-2 xl:col-3, col-12 md:col-4 xl:col-9"
				styleClass="customPanelGrid" contentStyleClass="ui-fluid">
				<p:outputLabel for="selectOneProcess" value="Process:" />
				<p:selectOneMenu id="selectOneProcess" converter="pojoConverter"
					value="#{data.workflowEstimatorDemoBean.seletedEstimator.process}">
					<f:selectItem itemLabel="Select process" itemValue="null"
						noSelectionOption="true" />
					<f:selectItems value="#{data.workflowEstimatorDemoBean.processes}"
						var="process" itemLabel="#{process.name}" itemValue="#{process}" />
					<p:ajax event="change" listener="#{logic.onChooseProcess}"
						update="estimator-dialog:estimator-dialog-content:selectOneElement"
						process="@this" />
				</p:selectOneMenu>

				<p:outputLabel for="selectOneElement" value="Start Elements:" />
				<p:selectOneMenu id="selectOneElement" converter="pojoConverter"
					value="#{data.workflowEstimatorDemoBean.seletedEstimator.startElement}">
					<f:selectItem itemLabel="Select elements" itemValue="" />
					<f:selectItems
						value="#{data.workflowEstimatorDemoBean.seletedEstimator.elements}"
						var="element" itemLabel="#{element.name}" itemValue="#{element}" />
				</p:selectOneMenu>

				<p:outputLabel for="SelectOneFindType" value="Find type:" />
				<p:selectOneMenu id="SelectOneFindType" converter="pojoConverter"
					value="#{data.workflowEstimatorDemoBean.seletedEstimator.findType}">
					<f:selectItem itemLabel="Select find type" itemValue=""
						noSelectionOption="true" />
					<f:selectItems
						value="#{data.workflowEstimatorDemoBean.allFindType}" var="type"
						itemLabel="#{type.findType}" itemValue="#{type}" />
				</p:selectOneMenu>

				<p:outputLabel for="flowName" value="Flow name:" />
				<p:inputText id="flowName"
					value="#{data.workflowEstimatorDemoBean.seletedEstimator.flowName}" />
			</p:panelGrid>

			<p:panel id="tasks"
				rendered="#{not empty data.workflowEstimatorDemoBean.seletedEstimator.tasks }">
				<p:outputLabel
					value="Path: #{data.workflowEstimatorDemoBean.seletedEstimator.elementNames}" />
				<br />
				<p:outputLabel
					value="Total Duration: #{data.workflowEstimatorDemoBean.seletedEstimator.totalDurationInHours}" />
			</p:panel>


			<div style="display: flex; float: right; margin-top: 20px">
				<p:commandButton id="generate" actionListener="#{logic.onGenerate}"
					value="Generate" process="@form" update="@form"
					icon="fa-solid fa-check" />

				<p:commandButton id="save-estimator" actionListener="#{logic.onSaveEstimator}"
					value="Save Estimator" process="@this" icon="fa-solid fa-save" oncomplete="PF('estimatorDialog').hide()"  />
			</div>


		</h:form>
	</p:dialog>
</cc:implementation>

</html>
